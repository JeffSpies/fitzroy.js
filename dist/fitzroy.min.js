/**
 ** FitzRoy.js
 ** @author jeffspies
 ** @author caneruguz
 **/
var finch=require("finch"),History=require("history"),$=require("jquery"),FitzRoy=FitzRoy||function(){var t=function(){$.expr[":"].external=function(t){var r=/^\w+:\/\//,n=$(t).attr("href");return void 0!==n&&-1!==n.search(r)},$.expr[":"].internal=function(t){return void 0!==$(t).attr("href")&&!$.expr[":"].external(t)},History.options.debug=!1,History.Adapter.bind(window,"statechange",function(){finch.call(History.getState().hash)})};t()};FitzRoy.prototype.getHash=function(){return History.getState().hash},FitzRoy.prototype.pushState=function(t,r,n){History.pushState(t,r,n)},FitzRoy.prototype.call=function(t){finch.call(t)},FitzRoy.prototype.add=function(t,r,n){var e=this.base;"["===t.substring(0,1)&&(t=t.substring(1,t.length),e="["+e),t=e+t,finch.route(t,function(t){r.call(n,t)})},FitzRoy.prototype.ajaxify=function(t){t instanceof $||(t=$(t));var r="a:internal:not(.no-ajax)";$(t).off("click",r).on("click",r,function(t){var r=$(this),n=r.attr("href"),e=r.attr("title")||null;return 2==t.which||t.metaKey?!0:(History.pushState(null,e,n),t.preventDefault(),!1)})},module.exports=FitzRoy;