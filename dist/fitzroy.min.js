/**
 ** FitzRoy.js
 ** @author jeffspies
 ** @author caneruguz
 **/
var finch=require("finch"),History=require("history"),$=require("jquery"),FitzRoy=FitzRoy||function(){var t=function(){$.expr[":"].external=function(t){var n=/^\w+:\/\//,e=$(t).attr("href");return void 0!==e&&-1!==e.search(n)},$.expr[":"].internal=function(t){return void 0!==$(t).attr("href")&&!$.expr[":"].external(t)},History.options.debug=!1,History.Adapter.bind(window,"statechange",function(){finch.call(History.getState().hash)})};t()};FitzRoy.prototype.getHash=function(){return History.getState().hash},FitzRoy.prototype.pushState=function(t,n,e){History.pushState(t,n,e)},FitzRoy.prototype.call=function(t){finch.call(t)},FitzRoy.prototype.add=function(t,n,e){var i=this.base;"["===t.substring(0,1)&&(t=t.substring(1,t.length),i="["+i),t=i+t,console.log(t),finch.route(t,function(){n.call(e)})},FitzRoy.prototype.ajaxify=function(t){t instanceof $||(t=$(t)),t.find("a:internal:not(.no-ajax)").off("click").on("click",function(t){var n=$(this),e=n.attr("href"),i=n.attr("title")||null;return 2==t.which||t.metaKey?!0:(History.pushState(null,i,e),t.preventDefault(),!1)})},module.exports=FitzRoy;